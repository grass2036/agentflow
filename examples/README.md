# ğŸŒŠ AgentFlow ä½¿ç”¨ç¤ºä¾‹

è¿™ä¸ªç›®å½•åŒ…å«äº†ä¸°å¯Œçš„AgentFlowä½¿ç”¨ç¤ºä¾‹ï¼Œä»åŸºç¡€å…¥é—¨åˆ°é«˜çº§åº”ç”¨ï¼Œå¸®åŠ©æ‚¨å¿«é€ŸæŒæ¡å¤šæ™ºèƒ½ä½“ç¼–æ’æ¡†æ¶çš„ä½¿ç”¨æ–¹æ³•ã€‚

## ğŸ“‹ ç¤ºä¾‹åˆ†ç±»

### ğŸ¯ åŸºç¡€ç¤ºä¾‹ (`basic/`)

é€‚åˆåˆšå¼€å§‹ä½¿ç”¨AgentFlowçš„å¼€å‘è€…ï¼š

| ç¤ºä¾‹æ–‡ä»¶ | æè¿° | å…³é”®æ¦‚å¿µ |
|---------|------|----------|
| `hello_agent.py` | æœ€ç®€å•çš„æ™ºèƒ½ä½“ç¤ºä¾‹ | æ’ä»¶åŸºç¡€ã€å¤šè¯­è¨€é—®å€™ |
| `task_scheduler_demo.py` | ä»»åŠ¡è°ƒåº¦å’Œä¾èµ–ç®¡ç† | ä»»åŠ¡è°ƒåº¦ã€ä¾èµ–è§£æ |

**æ¨èå­¦ä¹ é¡ºåº**ï¼š
1. å…ˆè¿è¡Œ `hello_agent.py` äº†è§£æ’ä»¶åŸºç¡€
2. å†è¿è¡Œ `task_scheduler_demo.py` å­¦ä¹ ä»»åŠ¡ç®¡ç†

### ğŸ”Œ æ’ä»¶å¼€å‘ (`plugins/`)

å­¦ä¹ å¦‚ä½•åˆ›å»ºè‡ªå®šä¹‰æ’ä»¶ï¼š

| ç¤ºä¾‹æ–‡ä»¶ | æè¿° | ç‰¹æ€§ |
|---------|------|------|
| `custom_plugin_example.py` | å®Œæ•´çš„æ•°æ®å¤„ç†æ’ä»¶ | ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€å¤šç§æ“ä½œã€ç¼“å­˜ã€ç»Ÿè®¡ |

**å­¦ä¹ è¦ç‚¹**ï¼š
- æ’ä»¶å…ƒæ•°æ®å®šä¹‰
- å¼‚æ­¥ä»»åŠ¡å¤„ç†
- é”™è¯¯å¤„ç†å’Œæ—¥å¿—
- æ€§èƒ½ç›‘æ§

### ğŸš€ é«˜çº§ç¤ºä¾‹ (`advanced/`)

å¤æ‚åœºæ™¯å’Œé«˜çº§åŠŸèƒ½ï¼š

| ç¤ºä¾‹æ–‡ä»¶ | æè¿° | é€‚ç”¨åœºæ™¯ |
|---------|------|----------|
| `multi_agent_collaboration.py` | å¤šæ™ºèƒ½ä½“åä½œé¡¹ç›® | å›¢é˜Ÿå¼€å‘ã€é¡¹ç›®ç®¡ç† |

**æ ¸å¿ƒç‰¹æ€§**ï¼š
- 6ç§ä¸åŒè§’è‰²çš„æ™ºèƒ½ä½“åä½œ
- å®Œæ•´çš„é¡¹ç›®å¼€å‘æµç¨‹æ¨¡æ‹Ÿ
- äº‹ä»¶é©±åŠ¨çš„å®æ—¶é€šä¿¡
- é¡¹ç›®äº¤ä»˜ç‰©ç”Ÿæˆ

### ğŸŒ Web APIé›†æˆ (`web_api/`)

å°†AgentFlowé›†æˆåˆ°Webåº”ç”¨ï¼š

| ç¤ºä¾‹æ–‡ä»¶ | æè¿° | æŠ€æœ¯æ ˆ |
|---------|------|--------|
| `fastapi_integration.py` | RESTful APIæœåŠ¡ | FastAPI + AgentFlow |

**APIåŠŸèƒ½**ï¼š
- æ™ºèƒ½ä½“çŠ¶æ€æŸ¥è¯¢
- é¡¹ç›®åˆ›å»ºå’Œç®¡ç†
- ä»»åŠ¡æ‰§è¡Œæ¥å£
- ç³»ç»Ÿç›‘æ§ç«¯ç‚¹

### ğŸ¤– èŠå¤©æœºå™¨äºº (`chatbot/`)

æ™ºèƒ½å¯¹è¯ç³»ç»Ÿå¼€å‘ï¼š

| ç¤ºä¾‹æ–‡ä»¶ | æè¿° | åŠŸèƒ½ |
|---------|------|------|
| `intelligent_assistant.py` | å¤šåŠŸèƒ½æ™ºèƒ½åŠ©æ‰‹ | å¯¹è¯ã€ä»»åŠ¡ç®¡ç†ã€è®¡ç®—å™¨ |

**æ™ºèƒ½åŠŸèƒ½**ï¼š
- è‡ªç„¶è¯­è¨€ç†è§£
- ä¸Šä¸‹æ–‡è®°å¿†
- å¤šæ¨¡æ€äº¤äº’
- ä¸ªæ€§åŒ–æœåŠ¡

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

```bash
# ç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•
cd /path/to/agentflow

# å®‰è£…åŸºç¡€ä¾èµ–
pip install -e .
```

### 2. è¿è¡Œç¬¬ä¸€ä¸ªç¤ºä¾‹

```bash
# æœ€ç®€å•çš„å…¥é—¨ç¤ºä¾‹
python3 examples/basic/hello_agent.py
```

é¢„æœŸè¾“å‡ºï¼š
```
ğŸŒŠ AgentFlow åŸºç¡€ç¤ºä¾‹ï¼šHello Agent
==================================================
ğŸ¤– Hello Agent åˆå§‹åŒ–å®Œæˆï¼

ğŸ¯ å¼€å§‹æ‰§è¡Œ 5 ä¸ªé—®å€™ä»»åŠ¡ï¼š
------------------------------

1. é—®å€™ä»»åŠ¡ï¼š
ğŸ’¬ ä½ å¥½ï¼Œå¼ ä¸‰ï¼
   ç»“æœï¼š{'greeting': 'ä½ å¥½ï¼Œå¼ ä¸‰ï¼', 'language': 'zh', ...}

...

ğŸ“Š æ‰§è¡Œæ€»ç»“ï¼š
   æ€»ä»»åŠ¡æ•°ï¼š5
   æˆåŠŸç‡ï¼š100%
   æ”¯æŒè¯­è¨€ï¼š5 ç§
```

### 3. æ¢ç´¢ä»»åŠ¡è°ƒåº¦

```bash
# å­¦ä¹ ä»»åŠ¡ä¾èµ–å’Œè°ƒåº¦
python3 examples/basic/task_scheduler_demo.py
```

### 4. å°è¯•é«˜çº§åŠŸèƒ½

```bash
# å¤šæ™ºèƒ½ä½“åä½œ
python3 examples/advanced/multi_agent_collaboration.py

# æ™ºèƒ½åŠ©æ‰‹å¯¹è¯
python3 examples/chatbot/intelligent_assistant.py
```

## ğŸ“š è¯¦ç»†è¯´æ˜

### åŸºç¡€ç¤ºä¾‹è¯¦è§£

#### `hello_agent.py` - å…¥é—¨å¿…è¯»

**å­¦ä¹ ç›®æ ‡**ï¼š
- ç†è§£æ’ä»¶çš„åŸºæœ¬ç»“æ„
- æŒæ¡å¼‚æ­¥ä»»åŠ¡å¤„ç†
- å­¦ä¹ å…ƒæ•°æ®å®šä¹‰

**å…³é”®ä»£ç æ®µ**ï¼š
```python
class HelloAgent(BasePlugin):
    @property
    def metadata(self) -> PluginMetadata:
        return PluginMetadata(
            name="hello_agent",
            version="1.0.0",
            description="æœ€ç®€å•çš„é—®å€™æ™ºèƒ½ä½“",
            tags=["basic", "example", "hello"]
        )
    
    async def execute_task(self, context: PluginContext) -> dict:
        # å¤„ç†ä»»åŠ¡é€»è¾‘
        name = context.data.get("name", "World")
        greeting = f"ä½ å¥½ï¼Œ{name}ï¼"
        return {"greeting": greeting}
```

#### `task_scheduler_demo.py` - æ ¸å¿ƒæ¦‚å¿µ

**å­¦ä¹ ç›®æ ‡**ï¼š
- ä»»åŠ¡åˆ›å»ºå’Œé…ç½®
- ä¾èµ–å…³ç³»ç®¡ç†
- è°ƒåº¦ç®—æ³•ç†è§£

**æ ¸å¿ƒæ¦‚å¿µ**ï¼š
- **ä¾èµ–è§£æ**ï¼šä»»åŠ¡Bä¾èµ–ä»»åŠ¡Aï¼Œå¿…é¡»ç­‰Aå®Œæˆåæ‰èƒ½æ‰§è¡ŒB
- **ä¼˜å…ˆçº§è°ƒåº¦**ï¼šé«˜ä¼˜å…ˆçº§ä»»åŠ¡ä¼˜å…ˆæ‰§è¡Œ
- **å¹¶å‘æ§åˆ¶**ï¼šé™åˆ¶åŒæ—¶æ‰§è¡Œçš„ä»»åŠ¡æ•°é‡

### æ’ä»¶å¼€å‘æŒ‡å—

#### `custom_plugin_example.py` - å®Œæ•´æ’ä»¶

è¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº†ä¸€ä¸ªå®Œæ•´çš„æ•°æ®å¤„ç†æ’ä»¶ï¼ŒåŒ…å«ï¼š

**ç”Ÿå‘½å‘¨æœŸç®¡ç†**ï¼š
```python
async def initialize(self) -> None:
    # æ’ä»¶åˆå§‹åŒ–é€»è¾‘
    self.register_hook("process_data")
    
async def cleanup(self) -> None:
    # æ¸…ç†èµ„æº
    self.data_cache.clear()
```

**å¤šç§æ“ä½œæ”¯æŒ**ï¼š
- æ•°æ®è®¡æ•°ã€æ±‚å’Œã€è¿‡æ»¤
- æ•°æ®åˆ†ç»„ã€éªŒè¯
- ç¼“å­˜ç®¡ç†

**æ€§èƒ½ç›‘æ§**ï¼š
```python
def get_statistics(self) -> Dict[str, Any]:
    return {
        "processed_count": self.processed_count,
        "success_rate": self.success_rate,
        "cache_size": len(self.data_cache)
    }
```

### é«˜çº§åº”ç”¨åœºæ™¯

#### `multi_agent_collaboration.py` - ä¼ä¸šçº§åº”ç”¨

**ä¸šåŠ¡åœºæ™¯**ï¼šæ¨¡æ‹ŸçœŸå®çš„è½¯ä»¶å¼€å‘å›¢é˜Ÿåä½œ

**æ™ºèƒ½ä½“è§’è‰²**ï¼š
- ğŸ¯ **é¡¹ç›®ç»ç†**ï¼šéœ€æ±‚åˆ†æã€é¡¹ç›®è§„åˆ’
- ğŸ—ï¸ **æ¶æ„å¸ˆ**ï¼šç³»ç»Ÿè®¾è®¡ã€æŠ€æœ¯é€‰å‹
- âš¡ **åç«¯å¼€å‘**ï¼šAPIå¼€å‘ã€æ•°æ®åº“è®¾è®¡
- ğŸ¨ **å‰ç«¯å¼€å‘**ï¼šç•Œé¢å¼€å‘ã€ç”¨æˆ·ä½“éªŒ
- ğŸ§ª **æµ‹è¯•å·¥ç¨‹å¸ˆ**ï¼šè´¨é‡ä¿è¯ã€æµ‹è¯•ç”¨ä¾‹
- ğŸš€ **DevOpså·¥ç¨‹å¸ˆ**ï¼šéƒ¨ç½²ã€è¿ç»´

**å·¥ä½œæµç¨‹**ï¼š
1. é¡¹ç›®ç»ç†åˆ†æéœ€æ±‚
2. æ¶æ„å¸ˆè®¾è®¡ç³»ç»Ÿæ¶æ„
3. å¼€å‘äººå‘˜å¹¶è¡Œå¼€å‘
4. æµ‹è¯•å·¥ç¨‹å¸ˆè¿›è¡Œæµ‹è¯•
5. DevOpså·¥ç¨‹å¸ˆè´Ÿè´£éƒ¨ç½²

### Web APIé›†æˆ

#### `fastapi_integration.py` - ç”Ÿäº§çº§API

**æ ¸å¿ƒç«¯ç‚¹**ï¼š
- `GET /agents` - æŸ¥çœ‹æ™ºèƒ½ä½“çŠ¶æ€
- `POST /projects` - åˆ›å»ºé¡¹ç›®
- `GET /projects/{session_id}` - æŸ¥çœ‹é¡¹ç›®çŠ¶æ€
- `POST /agents/{role}/task` - ä¸ºæ™ºèƒ½ä½“åˆ†é…ä»»åŠ¡

**ä½¿ç”¨æ–¹æ³•**ï¼š
```bash
# å¯åŠ¨æœåŠ¡
python3 examples/web_api/fastapi_integration.py

# è®¿é—®APIæ–‡æ¡£
open http://localhost:8000/docs

# åˆ›å»ºé¡¹ç›®
curl -X POST "http://localhost:8000/projects" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "æˆ‘çš„é¡¹ç›®",
    "description": "é¡¹ç›®æè¿°",
    "tech_stack": ["python_fastapi", "vue_js"],
    "complexity": "medium"
  }'
```

### èŠå¤©æœºå™¨äººå¼€å‘

#### `intelligent_assistant.py` - AIåŠ©æ‰‹

**åŠŸèƒ½ç‰¹ç‚¹**ï¼š
- ğŸ§  **æ™ºèƒ½å¯¹è¯**ï¼šè‡ªç„¶è¯­è¨€ç†è§£å’Œç”Ÿæˆ
- ğŸ’­ **ä¸Šä¸‹æ–‡è®°å¿†**ï¼šè®°ä½ç”¨æˆ·ä¿¡æ¯å’Œå¯¹è¯å†å²
- ğŸ› ï¸ **å¤šåŠŸèƒ½å·¥å…·**ï¼šä»»åŠ¡ç®¡ç†ã€è®¡ç®—å™¨ã€æ—¶é—´æŸ¥è¯¢
- ğŸ“‹ **å‘½ä»¤ç³»ç»Ÿ**ï¼šæ”¯æŒå¿«æ·å‘½ä»¤æ“ä½œ

**å‘½ä»¤åˆ—è¡¨**ï¼š
- `/help` - æ˜¾ç¤ºå¸®åŠ©
- `/task add <ä»»åŠ¡>` - æ·»åŠ ä»»åŠ¡
- `/calc 2+3*4` - è®¡ç®—è¡¨è¾¾å¼
- `/time` - æŸ¥çœ‹æ—¶é—´
- `/stats` - ä¼šè¯ç»Ÿè®¡

## ğŸ”§ å¼€å‘æŠ€å·§

### 1. è°ƒè¯•æŠ€å·§

```python
# å¯ç”¨è¯¦ç»†æ—¥å¿—
import logging
logging.basicConfig(level=logging.DEBUG)

# åœ¨æ’ä»¶ä¸­æ·»åŠ è°ƒè¯•è¾“å‡º
print(f"ğŸ› è°ƒè¯•ï¼š{context.data}")
```

### 2. æ€§èƒ½ä¼˜åŒ–

```python
# å¼‚æ­¥å¤„ç†å¤§é‡ä»»åŠ¡
async def process_batch(self, tasks):
    semaphore = asyncio.Semaphore(5)  # é™åˆ¶å¹¶å‘æ•°
    
    async def process_single(task):
        async with semaphore:
            return await self.execute_task(task)
    
    results = await asyncio.gather(*[process_single(t) for t in tasks])
    return results
```

### 3. é”™è¯¯å¤„ç†

```python
try:
    result = await agent.execute_task(context)
except Exception as e:
    logger.error(f"ä»»åŠ¡æ‰§è¡Œå¤±è´¥ï¼š{e}")
    # å®ç°é‡è¯•é€»è¾‘æˆ–é”™è¯¯æ¢å¤
```

### 4. æµ‹è¯•å»ºè®®

```python
# ä¸ºæ’ä»¶ç¼–å†™æµ‹è¯•
import pytest

@pytest.mark.asyncio
async def test_hello_agent():
    agent = HelloAgent()
    await agent.initialize()
    
    context = PluginContext(
        plugin_name="hello_agent",
        data={"name": "æµ‹è¯•ç”¨æˆ·"}
    )
    
    result = await agent.execute_task(context)
    assert result["greeting"] == "ä½ å¥½ï¼Œæµ‹è¯•ç”¨æˆ·ï¼"
```

## ğŸ¤ è´¡çŒ®ç¤ºä¾‹

æˆ‘ä»¬æ¬¢è¿æ‚¨è´¡çŒ®æ–°çš„ç¤ºä¾‹ï¼

### è´¡çŒ®æŒ‡å—

1. **é€‰æ‹©ä¸»é¢˜**ï¼šç¡®å®šç¤ºä¾‹è¦è§£å†³çš„å…·ä½“é—®é¢˜
2. **ç¼–å†™ä»£ç **ï¼šéµå¾ªç°æœ‰ç¤ºä¾‹çš„ä»£ç é£æ ¼
3. **æ·»åŠ æ³¨é‡Š**ï¼šæä¾›è¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Š
4. **æµ‹è¯•éªŒè¯**ï¼šç¡®ä¿ç¤ºä¾‹èƒ½æ­£å¸¸è¿è¡Œ
5. **æ›´æ–°æ–‡æ¡£**ï¼šåœ¨æ­¤READMEä¸­æ·»åŠ è¯´æ˜

### ç¤ºä¾‹æ¨¡æ¿

```python
#!/usr/bin/env python3
"""
ç¤ºä¾‹åç§°ï¼šç®€çŸ­æè¿°
=================

è¯¦ç»†è¯´æ˜è¿™ä¸ªç¤ºä¾‹çš„ç”¨é€”å’Œå­¦ä¹ ç›®æ ‡ã€‚

è¿è¡Œæ–¹å¼ï¼š
python3 examples/category/example_name.py
"""

import asyncio
import sys
from pathlib import Path

# æ·»åŠ é¡¹ç›®è·¯å¾„
sys.path.insert(0, str(Path(__file__).parent.parent.parent))

# å¯¼å…¥AgentFlowæ¨¡å—
from agentflow.plugins.base import BasePlugin, PluginMetadata

# ç¤ºä¾‹å®ç°...
```

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœæ‚¨åœ¨è¿è¡Œç¤ºä¾‹æ—¶é‡åˆ°é—®é¢˜ï¼š

1. **æ£€æŸ¥ä¾èµ–**ï¼šç¡®ä¿å®‰è£…äº†æ‰€æœ‰å¿…éœ€çš„ä¾èµ–
2. **æŸ¥çœ‹æ—¥å¿—**ï¼šæ³¨æ„æ§åˆ¶å°çš„é”™è¯¯ä¿¡æ¯
3. **å‚è€ƒæ–‡æ¡£**ï¼šé˜…è¯»é¡¹ç›®ä¸»è¦æ–‡æ¡£
4. **æäº¤Issue**ï¼šåœ¨GitHubä¸Šæäº¤é—®é¢˜æŠ¥å‘Š

---

**å¼€å§‹æ¢ç´¢AgentFlowçš„å¼ºå¤§åŠŸèƒ½å§ï¼** ğŸš€

æ¯ä¸ªç¤ºä¾‹éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œæ‚¨å¯ä»¥æŒ‰å…´è¶£é€‰æ‹©å­¦ä¹ é¡ºåºã€‚å»ºè®®ä»åŸºç¡€ç¤ºä¾‹å¼€å§‹ï¼Œé€æ­¥æ·±å…¥åˆ°é«˜çº§åº”ç”¨ã€‚